// Intravenous JavaScript library v0.1.0-beta
// (c) Roy Jacobs
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function(window,document,navigator,undefined){
var h=null;function m(c){function n(k,l){for(var g=k.split("."),i=c,j=0;j<g.length-1;j++)i=i[g[j]];i[g[g.length-1]]=l}c="undefined"!==typeof c?c:{};c.version="0.1.0-beta";n("version",c.version);(function(){function k(a,b,o){var d=l(b);d&&(b=b.slice(0,-1));for(var e,c=a;c&&!e;)e=c.l[b],e||(c=c.parent);if(!e){if("nullable"===d)return h;throw Error("Unknown dependency: "+b);}var f;if(f=a.b[e.i].get(b))return f;if(e.value instanceof Function){f=e.value.n;b=[];if(f instanceof Array){d=0;for(c=f.length;d<c;d++)b.push(k(a,
f[d],[]))}d=function(){};d.prototype=e.value.prototype;f=new d;d=0;for(c=o.length;d<c;d++)b.push(o[d]);e.value.apply(f,b)}else f=e.value;a.b[e.i].set(new q(e,f));return f}function l(a){if(a)switch(a.substr(-1)){case "?":return"nullable"}return h}function g(a,b){this.l={};this.parent=b;this.b={o:new p,p:new j,unique:new i};this.children=[];this.options=a=a||{};this.m("container",this)}function i(){this.a=[]}function j(){this.a=[]}function p(){this.a=[];this.k={};this.c=0;this.g={};this.h=[]}function q(a,
b){this.e=a;this.d=b}function r(a,b,c){this.key=a;this.value=b;this.i=c}p.prototype={get:function(a){for(var b=0,c=this.a.length;b<c;b++){var d=this.a[b];if(d.e.key===a&&d.c===this.c){if(!d.d)break;this.set(d);return d.d}}this.h.push(a);if(this.g[a])throw Error("Circular reference: "+this.h.join(" --\> "));this.g[a]=!0;return h},set:function(a){this.a.push(a);this.k[a.e.key]=this.k[a.e.key]++||1;a.c=this.c},f:function(){this.c++;this.g={};this.h=[]}};j.prototype={get:function(a){for(var b=0,c=this.a.length;b<
c;b++){var d=this.a[b];if(d.e.key===a){if(!d.d)break;this.set(d);return d.d}}return h},set:function(a){this.a.push(a)},f:function(){}};i.prototype={get:function(){return h},set:function(a){this.a.push(a)},f:function(){}};g.prototype={m:function(a,b,c){if(l(a))throw Error("Cannot register dependency: "+a);this.l[a]=new r(a,b,c||"perRequest")},get:function(a){for(var b in this.b)this.b.hasOwnProperty(b)&&this.b[b].f(a);b=Array.prototype.slice.call(arguments).slice(1);for(var c=this,d;c&&(d=k(c,a,b))===
h;)c=c.parent;return d},create:function(a){a=a||{};a.j=a.j||this.options.j;a=new g(a,this);this.children.push(a);return a}};c.create=function(a){return new g(a)};n("create",c.create)})()}"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?m(module.exports||exports):"function"===typeof define&&define.amd?define(["exports"],m):m(window.intravenous={});!0;
})(window,document,navigator);
